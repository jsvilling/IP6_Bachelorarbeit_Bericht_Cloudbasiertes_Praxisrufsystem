\subsection{Tests}

\subsubsection{Benutzertests}

Am 11.01.2022 wurden zusammen mit dem Auftraggeber Benutzertests durchgeführt.
Die iOS Applikation wurde auf zwei Physische iPads installiert.
Eine dritte Instanz der Applikation wurde auf einem Simulator gestartet.
Während den Benutzertests wurde folgendes getestet:

\begin{enumerate}
    \item Anmeldung und Konfigurationsauswahl funktioniert wie im Vorgängerprojekt.
    \item Benachrichtigungen können zwischen Mobile Clients versendet werden.
    \item Empfangene Benachrichtigungen werden dem Benutzer vorgelesen.
    \item Sprachverbindungen können über Buttons hergestellt werden.
    \item Sprachverbindungen werden automatisch angenommen.
    \item Über Sprachverbindungen können in Echtzeit Unterhaltungen geführt werden.
    \item Sprachverbindungen können wieder getrennt werden.
\end{enumerate}

Der Kunde hat während den Tests folgende Verbesserungswünsche eingebracht:

\begin{enumerate}
    \item Das Quittieren von Einträgen in der Inbox soll diese direkt löschen.
    \item Das Quittieren von Einträgen in der Inbox soll durch eine Wischgeste möglich sein.
    \item Die Töne für Benachrichtigungen und eingehende Anrufe von den Tönen anderer Apps unteschieden werden können.
    \item Die Töne für Benachrichtigungen und eingehende Anrufe sollen konfigurierbar sein.
    \item Icon und Name der App sollen angepasst werden.
    \item Bei eingehenden Sprachverbindungen soll ein Benachrichtigungston erklingen.
    \item Status von Verbindungsteilnehmern soll als Icon dargestellt werden.
\end{enumerate}

Dieses Feedback konnte grösstenteils umgesetzt werden.
Elemente können per Wischgeste quittiert werden und werden dabei direkt aus der Inbox gelöscht.
Icon und Name der App wurden angepasst.

Bei eingehenden Sprachverbindungen ertönt ein Benachrichtigungston bevor die Verbindung geöffnet wird.
Nachdem die Verbindung geöffnet wird, wird der Status aller Teilnehmenden mit einem einfachen Icon dargestellt.
Es werden unterschiedliche Töne für Benachrichtigungen, Erinnerungen an unquittierte Nachrichten und den Eingang von Sprachverbindungen verwendet.
Dabei werden keine Systemtöne von iOS verwendet.
Dadurch können Praxismitarbeitende die Bedeutung eines Tons aus der Praxisruf-App eindeutig erkennen.
Damit sind die Anforderungen aus Punkten 1.\ bis 3.\ sowie 5.\ bis 7.\ erfüllt.

Der Punkt 4.\ konnte aus Zeitgründen nicht umgesetzt werden.
Alle Töne sind allerdings fest definiert und können nicht durch den Benutzer konfiguriert werden.
Eine Änderung der Töne ist nur über Änderungen am Quellcode möglich.

\clearpage

\subsubsection{Funktionstests}

Im Rahmen des Projektes Peer-To-Peer Kommunikation für Sprachübertragung in einem Praxisrufsystem wurde ein finaler Testplan definiert.
Diese Tests wurden zum Abschluss des Projektes durchgeführt, um die Funktionalität des Systems abschliessend zu testen.
Die Szenarien S01 bis S18 wurden dabei aus dem Vorgängerprojekt ''IP5 Cloudbasiertes Praxisrufsystem'' übernommen.
Dadurch kann sichergestellt werden, dass alle Funktionen aus dem Vorgängerprojekt korrekt migriert wurden.
Die Testszenarien S19 bis S40 behandeln die Funktionen Sprachsynthese und Gegensprechanlage.
Die detaillierte Definition mit Ausgangslage, Testschritten und erwartetem Resultat der Testszenarien sind im Anhang C aufgeführt.

Folgendes Protokoll zeigt den Stand der letzten Ausführung der Tests am 21.03.2022:

\begin{table}[h]
    \centering
    \begin{tabular}{|l|p{11cm}|c|c|}
        \hline
        \textbf{Szenario} & \textbf{Beschreibung} & \textbf{Resultat} \\
        \hline
        S01         & Benachrichtigung versenden - Empfänger konfiguriert   & +\\
        \hline
        S02         & Benachrichtigung versenden - Kein Empfänger konfiguriert & +\\
        \hline
        S03         & Benachrichtigung empfangen.  & +\\
        \hline
        S04         & Fehler beim Versenden anzeigen.  & +\\
        \hline
        S05         & Wiederholen im Fehlerfall bestätigen.  & +\\
        \hline
        S06         & Wiederholen im Fehlerfall abbrechen.  & +\\
        \hline
        S07         & Audiosignal bei Benachrichtigung.   & +\\
        \hline
        S08         & Push Benachrichtigung im Hintergrund.  & +\\
        \hline
        S09         & Erinnerungston für nicht quittierte Benachrichtigungen.   & +\\
        \hline
        S10         & Start Mobile Client - Nicht angemeldet   & +\\
        \hline
        S11         & Start Mobile Client  - Angemeldet & +\\
        \hline
        S12         & Anmelden mit korrekten Daten.   & +\\
        \hline
        S13         & Anmeldung mit ungültigen Daten.   & +\\
        \hline
        S14         & Konfiguration Wählen   & +\\
        \hline
        S15         & Abmelden   & +\\
        \hline
        S16         & Admin UI - Anmeldung mit korrekten Daten   & +\\
        \hline
        S17         & Admin UI - Anmeldung mit ungültigen Daten   & +\\
        \hline
        S18         & Admin UI - Konfiguration Verwalten   & +\\
        \hline
        S19         & Benachrichtigung vorlesen - Sprachsynthese aktiviert und Benachrichtigung relevant & +\\
        \hline
        S20         & Benachrichtigung nicht vorlesen - Sprachsynthese aktiviert und Benachrichtigung nicht relevant & +\\
        \hline
        S21         & Lokale Einstellung - Sprachsynthese deaktiviert und Benachrichtigung relevant  & +\\
        \hline
        S22         & Lokale Einstellung - Sprachsynthese deaktiviert und Benachrichtigung nicht relevant  & +\\
        \hline
        S23         & Benachrichtigung verwalten - Relevanz Sprachsynthese kann im Admin UI aktiviert / deaktiviert werden  & +\\
        \hline
        S24         & Benachrichtigung empfangen - Änderung an Inhalt einer Benachrichtigung in Admin UI wird sofort angewendet   & +\\
        \hline
        S25         & Gegensprechanlage Buttons nach Anmeldung anzeigen & +\\
        \hline
        S26         & Verbindungsaufbau - Gegenüber ist Verfügbar & +\\
        \hline
        S27         & Verbindungsaufbau - Gegenüber ist nicht Verfügbar & +\\
        \hline
        S28         & Verbindungsaufbau - Gegenüber hat Gegensprechanlage deaktiviert & +\\
        \hline
        S29         & Verbindungsaufbau - Benachrichtigungston & +\\
        \hline
    \end{tabular}\label{tab:funktion_testplan_1}
\end{table}

\clearpage

\begin{table}[h]
    \centering
    \begin{tabular}{|l|p{11cm}|c|c|}
        \hline
        \textbf{Szenario} & \textbf{Beschreibung} & \textbf{Resultat} \\
        \hline
        S30         & Verbindungsaufbau - Automatische Annahme & +\\
        \hline
        S31         & Unterhaltung 1:1 - Unterhaltung in Echtzeit möglich & +\\
        \hline
        S32         & Unterhaltung 1:n - Unterhaltung in Echtzeit möglich & +\\
        \hline
        S33         & Verbindungsaufbau 1:n & +\\
        \hline
        S34         & Inbox - Vergangene Sprachverbindungen & +\\
        \hline
        S35         & Inbox - Verpasste Sprachverbindungen & +\\
        \hline
        S36         & Inbox - Abgelehnte Unterhaltungen & +\\
        \hline
        S37         & Verbindung trennen durch Empfänger & +\\
        \hline
        S38         & Verbindung trennen durch Initiator & +\\
        \hline
        S39         & Austreten aus Gruppenunterhaltung & +\\
        \hline
        S40         & Konfiguration über Admin UI & +\\
        \hline
    \end{tabular}\label{tab:funktion_testplan_2}
\end{table}

Alle Testszenarien konnten mit einem positiven Resultat abgeschlossen werden.
Das System erfüllt damit die Anforderungen, die im Rahmen dieses Projektes an ein Praxisrufsystem gestellt werden.
Das umgesetzte System weist aber durchaus noch Potential zur Weiterentwicklung auf.

Im Bereich Gegensprechanlage, besteht Optimierungspotential für das Entgegennehmen von Anrufen.
Das Empfangen von Anrufen ist aktuell nur möglich, wenn die Praxisruf-App aktiv ist.
Ist die App nicht aktiv, werden Empfänger über Benachrichtigungen auf verpasste Anrufe hingewiesen.
Das Antippen dieser Benachrichtigungen öffnet die Praxisruf-App.
Es wird dabei aber kein Anruf entgegengenommen.
Für die Weiterentwicklung des Systems wäre es ideal, wenn das Öffnen einer Benachrichtigung für verpasste Anrufe einen direkten Rückruf ermöglicht.

Die Benutzeroberflächen des Mobile Clients erlaubt eine effiziente Bedienung des Systems.
Design und User Experience der Applikationen könnten aber weiter verbessert werden.
Für die Weiterentwicklung der App sollte die Applikation zusammen mit Praxismitarbeitenden getestet werden.
So können diese Rückmeldung zur Bedienung der App geben.
Basierend darauf kann die App für Bedürfnisse der Anwendenen optimiert werden.

Weiter hat das System noch Lücken die auf das Vorgängerprojekt zurückzuführen sind.
Diese Verbesserungen sind ausserhalb des Umfangs dieses Projektes gefallen, sollten für die Weiterentwicklung von Praxisruf aber berücksichtigt werden.
Insbesondere das Quittieren von Benachrichtigungen und die Konfigurationsverwaltung könnten verbessert werden.

Das Quittieren von Benachrichtigungen ist mit dem aktuellen System nur lokal auf dem Empfängergerät möglich.
Für die Weiterentwicklung des Systems wäre es wünschenswert, dass ein Sender über die Quittierung von Benachrichtigungen informiert wird.
So kann er sicher sein, dass die Benachrichtigung empfangen und gelesen wurde.

Das Admin UI ermöglicht heute die Konfiguration des Systems.
Die Konfiguration des Systems könnte aber weiter optimiert werden.
Heute ist es nicht möglich, die Konfiguration für ein Zimmer mehrfach zu verwenden.
Dies bedeutet, dass Praxisadministrierende manche Konfigurationen mehrfach erfassen müssen.
Weiter verwendet die Benutzeroberfläche des Admin UI ausschliesslich technische Begriffe für die Konfigurationseinheiten.
Für die Weiterentwicklung des Systems sollten sprechende Begriffe in der Benutzeroberfläche verwendet werden.
Die Konfiguration des Systems sollte vereinfacht werden, so dass keine doppelten Konfigurationen vorgenommen werden müssen.

Das System bringt noch diverse Lücken aus dem Vorgängerprojekt mit sich und hat Potential sich in den Bereichen Benutzerfreundlichkeit und Stabilität zu verbessern.
Trotz dieser Lücken werden die funktionalen Anforderungen, die im Rahmen dieses Projektes an Praxisruf gestellt wurden, erfüllt.
Die Funktionstests sind dadurch mit einem positiven Resultat abgeschlossen.
Das System kann in der aktuellen Form eingesetzt werden.
Für den langfristigen Erfolg des Systems, sollten die bekannten Lücken allerdings bei der Weiterentwicklung adressiert werden.

\subsubsection{Performancetests}

Neben Szenarien für Funktionstests, wurden einfache Tests zur Messung der Performance des Systems definiert.
Dazu wurden die Performancekriterien P01 bis P08 definiert.
Folgendes Protokoll zeigt den Stand der letzten Ausführung der Tests am 21.03.2022.

\begin{table}[h]
    \centering
    \begin{tabular}{|l|p{11cm}|c|c|}
        \hline
        \textbf{Kriterium} & \textbf{Beschreibung} & \textbf{Resultat} \\
        \hline
        P01         & Zeit bis Benachrichtigung ankommt im Schnitt $<$ 5s & +\\
        \hline
        P02         & Vorlesen von Benachrichtigung $<$ 5s nach Benachrichtigungston (ohne Cache) & +\\
        \hline
        P03         & Vorlesen von Benachrichtigung $<$ 5s nach Benachrichtigungston (mit Cache) & +\\
        \hline
        P04         & Verbindungsaufbau Sprachverbindung $<$ 5s  & +\\
        \hline
        P05         & Verzögerung bei Sprachverbindung klein um kurze Gespräche zu führen & +\\
        \hline
        P06         & Ressourcenverbrauch der Applikation bleibt über Zeit konstant & +\\
        \hline
        P07         & Übertragungsqualität von Sprachverbindungen ist ausreichend für normale Unterhaltungen & +\textbackslash- \\
        \hline
        P08         & Verbindung zur Signaling Instanz bleibt geöffnet und wird bei Fehlern automatisch wiederhergestellt. & +\textbackslash- \\
        \hline
    \end{tabular}\label{tab:testplan_performance}
\end{table}

Die Performancekriterien P01 bis P06 sind vollständig erfüllt.
Die Kriterien P07 und P08 sind mit Einschränkungen erfüllt und zeigen, dass das die Performance des Systems weiter verbessert werden könnte.

Das Kriterium P07 wird mit Einschränkungen erfüllt.
Die Qualität der Sprachverbindungen ist ausreichend für eine Gegensprechanlage.
Es ist problemlos möglich Unterhaltungen über die aufgebaute Sprachverbindung zu führen.
Probleme können entstehen, wenn eine Verbindung zwischen Endgeräten aufgebaut wird, welche nahe beieinander installiert sind.
In diesem Fall können Rückkoppelungen entstehen, welche zu einem Echo und schrillen Pfeifton führen kann.
Dieses Problem ist durch eine entsprechende Ausrichtung der Geräte vermeidbar.
Es schränkt aber ein, wie die Endgeräte des Systems in einer Praxis installiert werden können.

Das Kriterium P08 ist grundsätzlich erfüllt.
Wenn die Verbindung zur Signaling Instanz verloren geht, wird eine Fehlermeldung angezeigt.
Die Verbindung wird danach sobald möglich automatisch wiederhergestellt.
Dies wurde mehrmals über einen Zeitraum von 12h getestet und hat zuverlässig funktioniert.
Dabei ist es in Einzelfällen dazu gekommen, dass die Fehlermeldung angezeigt wird, obwohl es keinen ersichtlichen Grund gibt, dass die Verbindung getrennt wurde.
Nach Bestätigung des Dialogs, konnte die Verbindung in jedem Fall wiederhergestellt werden.
Versuche dieses Verhalten gezielt zu reproduzieren waren nicht erfolgreich.
Da die Verbindung in jedem Fall wiederhergestellt werden konnte, wird das Kriterium P08 als erfüllt betrachtet.
Für die Weiterentwicklung des Systems, sollte die Verbindungsverwaltung in einem produktionsnahen Umfeld getestet werden.
Dabei kann die Performance des Systems beobachtet werden und wenn nötig Korrekturen an der Verwaltung vorgenommen werden.

Letztlich haben Installationstests des Releases für die Praxisruf-App gezeigt, dass die initiale Installation des Systems aufwändig sein kann.
In einzelnen Testdurchläufen konnten direkt nach der Installation keine Sprachverbindungen aufgebaut werden.
Dieses Problem konnte darauf zurückgeführt werden, dass die Berechtigungen, welche für Netzwerkverbindungen benötigt werden, nicht korrekt angefordert wurden.
In der Installationsanleitung (Anhang D) wird beschrieben, wie dieses Problem bei der Installation gelöst werden kann.
Für die Weiterentwicklung des Systems wäre es wünschenswert, dass alle Berechtigungen automatisch und zwingend beim Start der Applikation angefordert werden.

Die Performancetests konnten mit einem positiven Resultat abgeschlossen werden.
Das System kann trotz der bekannten Lücken effizient bedient und als Praxisrufsystem verwendet werden.
Die bekannten Lücken sollten aber mit Weiterentwicklung von Praxisruf geschlossen werden.

\clearpage
