
\subsection{Mobile Client}

Mit dem Projekt ''IP5 Cloudbasiertes Praxisrufsystem'' wurde bereits eine mobile Applikation für Praxisruf umgesetzt.
Mit dieser Applikation können bereits heute Benachrichtungen über Praxisruf versendet und empfangen werden.\cite{ip5}
Die bestehende Applikation wurde mit Nativescript\cite{nativescript} als Multi-Platform Applikation gebaut.
Um die Wartbarkeit und Hardware- sowie Betriebssystemkomaptibilität zu gewährleisten wurde im Fazit des Vorgängerprojekts empfohlen,
die Applikation neu als native Applikation für iOS und Android zu schreiben.\cite{ip5}

Mit diesem Projekt soll die Applikation dementsprechend neu als native iOS Applikation umgesetzt werden.
Dabei ist es wichtig, dass sämtliche bestehende Funktionalität auch im neu entwickelten nativen Mobile Client zur Verfügung steht.
Um weiterhin Benachrichtungen senden und empfangen zu können, muss die gewählte Technologie es ermöglichen Firebase Cloud Messaging anzubinden
und Push Benachrichtigungen im Vorder- sowie im Hintergrund empfängen können.
Weiter muss die Technologie es ermöglichen, Hintergrundtasks zu erstellen und Audiosignale abzuspielen.
Dadurch wird es möglich, regelmässig ein Signal abzuspielen um die Praxismitarbeitenden an verpasste Benachrichtigungen zu erinnern.

\subsubsection*{Programmiersprache}

Für die Entwicklung von nativen iOS Applikationen ist die Programmiersprache Swift Industriestandard.\cite{ios_swift}
Der native iOS Client für Praxisruf wird deshalb mit Swift implementiert.

\subsubsection*{Frameworks}

Für die Umsetzung von iOS Applikationen stellt Apple die zwei Frameworks UIKit\cite{ios_uikit} und SwiftUI\cite{ios_swift_ui} zur Verfügung.
UIKit ist das ältere der beiden Frameworks und ist seit iOS 2.0 verfügbar.
Dementsprechend ist das Framework ausgereifter und bietet viele Funktionen zur Integration einer Applikation mit iOS.\cite{ios_uikit}

SwiftUI ist deutlich neuer und steht seit iOS 13.0 zur Verfügung.
Auf der offiziellen Dokumentationsseite zu SwiftUI schreibt Apple "SwiftUI helps you build great-looking apps across all Apple platforms with the power of Swift — and as little code as possible."\cite{ios_swift_ui}
SwiftUI fokussiert sich auf eine declarative Syntax, welche es leichtgewichtiger als UIKit macht.
Es bietet zudem ausgezeichnete Integration des Entwicklungsworkflows in die XCode Entwicklungsumgebung und viele Standardkomponenten wie Listenansichten, Formfelder und andere UIKomponenten.
Dadurch wird es einfacher eine Benutzeroberfläche mit dem nativem Look und Feel einer nativen iOS Applikation umzusetzten.

Da SwiftUI deutlich neuer ist als UIKit, ist es möglich das es noch nicht alle Funktionen und Betriebssystem Integrationen unterstützt die in UIKIt möglich sind.
Dieses Problem wird dadurch aufgehoben, dass UIKit Funktionen nahtlos in SwiftUI integriert werden können.\cite{ios_swift_ui_uikit}
Es ist also grundsätzlich möglich, alles was mit UIKit umgesetzt werden kann auch mit SwiftUI umuzusetzen.

\clearpage

\subsubsection*{Unterstützung Benachrichtigungen}

Um Notifikationen über Praxisruf versenden und Empfangen zu können, muss Firebase Cloud Messaging in die Applikation integriert werden können. 
Firebase stellt für die Integration in iOS eine native Library zur Verfügung.\cite{firebase_github_ios} 
Die Integration von Firebase Cloud Messaging kann über Funktionen dieser Library implementiert werden.
Dies beinhaltet die Registrierung bei Firebase Cloud Messaging sowie das Empfangen der Benachrichtigungen über Firebase. \cite{firebase_ios}
Damit Push-Benachrichtigungen über das Betriebssystem angezeigt werden können, müssen die Empfangen Benachrichtigungen an das Betriebssystem übergeben werden.
Mit AppDelegates ist es möglich sich in den Lifecycle des Betriebssystems einzuhängen\cite{ios_app_delegate}.
Dadurch ist es auch möglich, Vorder- und Hintergrundbenachrichtigungen über das Benachrichtigungszenter von iOS anzuzeigen\cite{firebase_ios}.

Die Firebase Cloud Messaging Library kann sowohl mit SwiftUI als auch mit UIKit verwendet werden.
AppDelegates sind ein Konzept welches aus UIKit stammt\cite{ios_app_delegate}.
SwiftUI Applikationen können ohne AppDelegates implementiert werden.
UIKit Funktionen können allerdings nahtlos mit SwiftUI integriert werden.\cite{ios_swift_ui_uikit}
Die Firebase Cloud Messaging Library für iOS ermöglicht es also, Benachrichtigungen von Praxisruf sowohl mit UIKit als auch mit SwiftUI umzusetzten.


\subsubsection*{Benachrichtigungen prüfen}

Der Mobile Client soll den Benutzer regelmässig erinnern, wenn es ungelesene empfangene Benachrichtigungen gibt.
Dazu muss regelmässig geprüft werden, ob es solche Benachrichtigungen gibt und gegebenenfalls ein Erinnerungston abgespielt werden.
Die standard iOS Libraries von Apple bieten Mittel, mit welchen regelmässige Aufgaben angestossen werden können.
Einerseits können über ''Timer'' in Regelmässigen abständen Events veröffentlicht werden.
Auf einer SwiftUI View kann ein beliebiger Listener registriert werden, der beim Empfang eines Events des Timers aufgerufen wird.
Dies bringt die Einschränkung mit sich, dass die Prüfung nur ausgeführt ist, wenn die App im Vordergrund läuft und die View geladen wurde.\cite{ios_timer}
Da der bestehende Mobile Client dieselbe Einschränkung hat, könnte mit einem Timer trotzdem genau dasselbe Verahlten wie im bestehenden Client umgesetzt werden.
Apple bietet allerdings auch Mittel, um Aufgaben im Hintergrund zu verarbeiten.
Über die Klasse BGTaskScheduler können Aufgaben erfasst werden, die im Hintergrund ausgeführt werden.\cite{ios_bgtaskscheduler}

Die Umsetzung von der Erinnerungsfunktion kann also ohne zusätzliche Frameworks umgesetzt werden.
Es besteht zudem die Möglichkeit den Umfang des bestehenden Clients zu erweitern und die Prüfungen auch im Hintergrund laufen zu lassen.

\subsubsection*{Entscheid}

Der native iOS Mobile Client für Praxisruf wird mit Swift und SwiftUI umgesetzt.
Der deklarative Syntax, ermöglicht es einfacher übersichtliche und lesbare Komponenten zu implementieren.
Ausgezeichnete Integration in die XCode Entwicklungsumgebung und die zur Verfügung gestellten Standard Komponenten reduzieren den Entwicklungsaufwand weiter.
Die Neuheit von SwiftUI bedeutet, dass möglicherweise gewisse Funktionen noch nicht mit purem SwiftUI umgesetzt werden können.
Um diese Wahrscheinlichkeit zu minimieren, wird iOS15 als Zielplattform gewählt.
Mit der Verwendung der neusten iOS Version als Zielplattform kann auch die neuste Version von SwiftUI und damit alle zur Verfügung stehenden Funktionen aus SwiftUI verwendet werden.
Sollten trotzdem Funktionen benötigt werden, die SwiftUI nicht unterstützt, können diese dank der nahtlosen Integration mit UIKit implementiert und in Zukunft migriert werden.

\clearpage
